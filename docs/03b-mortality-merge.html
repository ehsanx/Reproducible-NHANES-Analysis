<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Analyzing Early Smoking Initiation and Mortality - 5&nbsp; Mortality and NHANES Merging</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./04-variable-cleaning.html" rel="next">
<link href="./03a-download-merge.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script><link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>
</head>
<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg navbar-dark "><div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./images/ubc_logo.png" alt="" class="navbar-logo"></a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">NHANES Mortality Analysis</span>
    </a>
  </div>
        <div class="quarto-navbar-tools ms-auto">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./03a-download-merge.html">Data Preparation</a></li><li class="breadcrumb-item"><a href="./03b-mortality-merge.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Mortality and NHANES Merging</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto"><div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Reproducing the Analysis: Early Smoking Initiation and Mortality</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Introduction and Background</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Overview of the Study</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-nhanes-overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">NHANES Data Overview</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Data Preparation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03a-download-merge.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Data Download and Merging</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03b-mortality-merge.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Mortality and NHANES Merging</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-variable-cleaning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Variable Definitions and Cleaning</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-cohort-definition.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Cohort Definition</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Statistical Analysis</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-survey-design.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Survey Design Specification</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07-descriptive-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Descriptive Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./08-survival-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Survival Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./09-effect-modification.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Effect Modification Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./10-sensitivity-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Sensitivity Analyses</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Discussion</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./11-discussion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Discussion of Results</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./12-limitations-future.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Limitations and Future Directions</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendices.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Appendices</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#combining-the-nhanes-survey-cycles" id="toc-combining-the-nhanes-survey-cycles" class="nav-link active" data-scroll-target="#combining-the-nhanes-survey-cycles"><span class="header-section-number">5.1</span> Combining the NHANES Survey Cycles</a></li>
  <li>
<a href="#acquiring-the-linked-mortality-data" id="toc-acquiring-the-linked-mortality-data" class="nav-link" data-scroll-target="#acquiring-the-linked-mortality-data"><span class="header-section-number">5.2</span> Acquiring the Linked Mortality Data</a>
  <ul class="collapse">
<li><a href="#mortality-data-1999-2000" id="toc-mortality-data-1999-2000" class="nav-link" data-scroll-target="#mortality-data-1999-2000"><span class="header-section-number">5.2.1</span> Mortality data 1999-2000</a></li>
  <li><a href="#mortality-data-2001-2002" id="toc-mortality-data-2001-2002" class="nav-link" data-scroll-target="#mortality-data-2001-2002"><span class="header-section-number">5.2.2</span> Mortality data 2001-2002</a></li>
  <li><a href="#mortality-data-2003-2004" id="toc-mortality-data-2003-2004" class="nav-link" data-scroll-target="#mortality-data-2003-2004"><span class="header-section-number">5.2.3</span> Mortality data 2003-2004</a></li>
  <li><a href="#mortality-data-2005-2006" id="toc-mortality-data-2005-2006" class="nav-link" data-scroll-target="#mortality-data-2005-2006"><span class="header-section-number">5.2.4</span> Mortality data 2005-2006</a></li>
  <li><a href="#mortality-data-2007-2008" id="toc-mortality-data-2007-2008" class="nav-link" data-scroll-target="#mortality-data-2007-2008"><span class="header-section-number">5.2.5</span> Mortality data 2007-2008</a></li>
  <li><a href="#mortality-data-2009-2010" id="toc-mortality-data-2009-2010" class="nav-link" data-scroll-target="#mortality-data-2009-2010"><span class="header-section-number">5.2.6</span> Mortality data 2009-2010</a></li>
  <li><a href="#mortality-data-2011-2012" id="toc-mortality-data-2011-2012" class="nav-link" data-scroll-target="#mortality-data-2011-2012"><span class="header-section-number">5.2.7</span> Mortality data 2011-2012</a></li>
  <li><a href="#mortality-data-2013-2014" id="toc-mortality-data-2013-2014" class="nav-link" data-scroll-target="#mortality-data-2013-2014"><span class="header-section-number">5.2.8</span> Mortality data 2013-2014</a></li>
  <li><a href="#mortality-data-2015-2016" id="toc-mortality-data-2015-2016" class="nav-link" data-scroll-target="#mortality-data-2015-2016"><span class="header-section-number">5.2.9</span> Mortality data 2015-2016</a></li>
  <li><a href="#mortality-data-2017-2018" id="toc-mortality-data-2017-2018" class="nav-link" data-scroll-target="#mortality-data-2017-2018"><span class="header-section-number">5.2.10</span> Mortality data 2017-2018</a></li>
  </ul>
</li>
  <li><a href="#merging-nhanes-with-mortality-data" id="toc-merging-nhanes-with-mortality-data" class="nav-link" data-scroll-target="#merging-nhanes-with-mortality-data"><span class="header-section-number">5.3</span> Merging NHANES with Mortality Data</a></li>
  <li><a href="#chapter-summary-and-next-steps" id="toc-chapter-summary-and-next-steps" class="nav-link" data-scroll-target="#chapter-summary-and-next-steps"><span class="header-section-number">5.4</span> Chapter Summary and Next Steps</a></li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">
<span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Mortality and NHANES Merging</span>
</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header><hr>
<p>This section continues the data preparation process. In the previous part, we created 10 cleaned datasets, one for each NHANES cycle from 1999 to 2018. Now, we will combine those 10 datasets into a single data frame and then link it with the all-cause mortality follow-up data from the National Death Index (NDI).</p>
<div class="cell" data-hash="03b-mortality-merge_cache/html/libraries_acc6bfe64fd66b5a0c2d81b79be1086c">
<details><summary>Show/Hide Code</summary><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># Load required packages</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(readr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="combining-the-nhanes-survey-cycles" class="level2" data-number="5.1"><h2 data-number="5.1" class="anchored" data-anchor-id="combining-the-nhanes-survey-cycles">
<span class="header-section-number">5.1</span> Combining the NHANES Survey Cycles</h2>
<ul>
<li>R Code Chunk 1: Load Processed NHANES Data</li>
</ul>
<p>The following code begins by loading the 10 processed <code>.RData</code> files that were created and saved in the previous section. Each file contains the cleaned demographic and smoking variables for participants aged 20 years and older for a specific survey cycle. The <code><a href="https://rdrr.io/r/base/ls.html">ls()</a></code> command is used to list the objects now loaded in our R environment.</p>
<div class="cell" data-hash="03b-mortality-merge_cache/html/reading_01eca59fe57a790b357988fa7a625b23">
<details><summary>Show/Hide Code</summary><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="fu">load</span>(<span class="at">file=</span><span class="st">"data/analytic00.RData"</span>)</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="fu">load</span>(<span class="at">file=</span><span class="st">"data/analytic01.RData"</span>)</span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="fu">load</span>(<span class="at">file=</span><span class="st">"data/analytic03.RData"</span>)</span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="fu">load</span>(<span class="at">file=</span><span class="st">"data/analytic05.RData"</span>)</span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="fu">load</span>(<span class="at">file=</span><span class="st">"data/analytic07.RData"</span>)</span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="fu">load</span>(<span class="at">file=</span><span class="st">"data/analytic09.RData"</span>)</span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="fu">load</span>(<span class="at">file=</span><span class="st">"data/analytic11.RData"</span>)</span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="fu">load</span>(<span class="at">file=</span><span class="st">"data/analytic13.RData"</span>)</span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="fu">load</span>(<span class="at">file=</span><span class="st">"data/analytic15.RData"</span>)</span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="fu">load</span>(<span class="at">file=</span><span class="st">"data/analytic17.RData"</span>)</span>
<span id="cb2-11"><a href="#cb2-11"></a><span class="fu">ls</span>()</span>
<span id="cb2-12"><a href="#cb2-12"></a><span class="co">#&gt;  [1] "analytic00"      "analytic01"      "analytic03"      "analytic05"     </span></span>
<span id="cb2-13"><a href="#cb2-13"></a><span class="co">#&gt;  [5] "analytic07"      "analytic09"      "analytic11"      "analytic13"     </span></span>
<span id="cb2-14"><a href="#cb2-14"></a><span class="co">#&gt;  [9] "analytic15"      "analytic17"      "has_annotations" "nhanes00"       </span></span>
<span id="cb2-15"><a href="#cb2-15"></a><span class="co">#&gt; [13] "nhanes01"        "nhanes03"        "nhanes05"        "nhanes07"       </span></span>
<span id="cb2-16"><a href="#cb2-16"></a><span class="co">#&gt; [17] "nhanes09"        "nhanes11"        "nhanes13"        "nhanes15"       </span></span>
<span id="cb2-17"><a href="#cb2-17"></a><span class="co">#&gt; [21] "nhanes17"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
<ul>
<li>R Code Chunk 2: Combine NHANES Cycles and Adjust Weights</li>
</ul>
<p>Now that the 10 separate NHANES datasets are loaded into the environment, we need to combine them into one single data frame and adjust the survey weights for the pooled data.</p>
<p><strong>1. Combine Datasets</strong></p>
<p>The following code combines the 10 individual analytic data frames into a single, large data frame named <code>dat.full</code>. The <code><a href="https://rdrr.io/r/base/cbind.html">rbind()</a></code> function is used to stack the data frames by row. After this step, we run several checks to confirm that all 10 survey cycles are present and to see the final dimensions of the combined dataset. There are now 101316 rows in the single dataframe.</p>
<div class="cell" data-hash="03b-mortality-merge_cache/html/nhanesMerge_747590bd47d0c6943cfc4b388059acd2">
<details><summary>Show/Hide Code</summary><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="co"># Full dataset : 1999-2018</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>dat.full <span class="ot">&lt;-</span> <span class="fu">rbind</span>(nhanes00, nhanes01, nhanes03, nhanes05, </span>
<span id="cb3-3"><a href="#cb3-3"></a>                  nhanes07, nhanes09, nhanes11, </span>
<span id="cb3-4"><a href="#cb3-4"></a>                  nhanes13, nhanes15, nhanes17)</span>
<span id="cb3-5"><a href="#cb3-5"></a></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="fu">unique</span>(dat.full<span class="sc">$</span>year)</span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="co">#&gt;  [1] NHANES 1999-2000 Public Release NHANES 2001-2002 Public Release</span></span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="co">#&gt;  [3] NHANES 2003-2004 Public Release NHANES 2005-2006 Public Release</span></span>
<span id="cb3-9"><a href="#cb3-9"></a><span class="co">#&gt;  [5] NHANES 2007-2008 Public Release NHANES 2009-2010 Public Release</span></span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="co">#&gt;  [7] NHANES 2011-2012 public release NHANES 2013-2014 public release</span></span>
<span id="cb3-11"><a href="#cb3-11"></a><span class="co">#&gt;  [9] NHANES 2015-2016 public release NHANES 2017-2018 public release</span></span>
<span id="cb3-12"><a href="#cb3-12"></a><span class="co">#&gt; 10 Levels: NHANES 1999-2000 Public Release ... NHANES 2017-2018 public release</span></span>
<span id="cb3-13"><a href="#cb3-13"></a><span class="fu">length</span>(<span class="fu">unique</span>(dat.full<span class="sc">$</span>year))</span>
<span id="cb3-14"><a href="#cb3-14"></a><span class="co">#&gt; [1] 10</span></span>
<span id="cb3-15"><a href="#cb3-15"></a><span class="fu">dim</span>(dat.full)</span>
<span id="cb3-16"><a href="#cb3-16"></a><span class="co">#&gt; [1] 101316     12</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>2. Adjust Survey Weights</strong></p>
<p>Next, the following code adjusts the survey weights. When combining multiple NHANES cycles, the original two-year survey weights must be redistributed. We create a new weight variable, <code>survey.weight.new</code>, by dividing the original weight by the number of survey cycles (10). The original weight column is then removed.</p>
<div class="cell" data-hash="03b-mortality-merge_cache/html/weight_variable_d49a24e6e6a33b009616d87dab97dad5">
<details><summary>Show/Hide Code</summary><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="co"># Corrected Weights</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>dat.full<span class="sc">$</span>survey.weight.new <span class="ot">&lt;-</span> dat.full<span class="sc">$</span>survey.weight <span class="sc">/</span> </span>
<span id="cb4-3"><a href="#cb4-3"></a>  <span class="fu">length</span>(<span class="fu">unique</span>(dat.full<span class="sc">$</span>year))</span>
<span id="cb4-4"><a href="#cb4-4"></a></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="co"># Remove original variable</span></span>
<span id="cb4-6"><a href="#cb4-6"></a>dat.full<span class="sc">$</span>survey.weight <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb4-7"><a href="#cb4-7"></a></span>
<span id="cb4-8"><a href="#cb4-8"></a><span class="co"># Print Columns</span></span>
<span id="cb4-9"><a href="#cb4-9"></a><span class="fu">names</span>(dat.full)</span>
<span id="cb4-10"><a href="#cb4-10"></a><span class="co">#&gt;  [1] "id"                 "age"                "sex"               </span></span>
<span id="cb4-11"><a href="#cb4-11"></a><span class="co">#&gt;  [4] "race"               "born"               "smoking.age"       </span></span>
<span id="cb4-12"><a href="#cb4-12"></a><span class="co">#&gt;  [7] "smoked.while.child" "smoking"            "psu"               </span></span>
<span id="cb4-13"><a href="#cb4-13"></a><span class="co">#&gt; [10] "strata"             "year"               "survey.weight.new"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr></section><section id="acquiring-the-linked-mortality-data" class="level2" data-number="5.2"><h2 data-number="5.2" class="anchored" data-anchor-id="acquiring-the-linked-mortality-data">
<span class="header-section-number">5.2</span> Acquiring the Linked Mortality Data</h2>
<ul>
<li>R Code Chunk 3: Download and Read Mortality Data</li>
</ul>
<p>This section covers downloading the public-use mortality data linked to the NHANES participants.</p>
<p><strong>1. Create Data Directories</strong></p>
<p>Before downloading the data, we first ensure the necessary subdirectories (<code>data/</code> and <code>data/Mortalitydata/</code>) exist in our project folder for our computer’s workspace. The following code checks for these directories and creates them if they are missing, which prevents errors when saving files.</p>
<div class="cell" data-hash="03b-mortality-merge_cache/html/Dir_9385cfe09cbd7d9297605f8d02006049">
<details><summary>Show/Hide Code</summary><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="co"># Create directories only if they don't exist</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">dir.exists</span>(<span class="st">"data"</span>)) {</span>
<span id="cb5-3"><a href="#cb5-3"></a>  <span class="fu">dir.create</span>(<span class="st">"data"</span>)</span>
<span id="cb5-4"><a href="#cb5-4"></a>}</span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">dir.exists</span>(<span class="st">"data/Mortalitydata"</span>)) {</span>
<span id="cb5-6"><a href="#cb5-6"></a>  <span class="fu">dir.create</span>(<span class="st">"data/Mortalitydata"</span>)</span>
<span id="cb5-7"><a href="#cb5-7"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>2. Read Fixed-Width Format Files</strong></p>
<p>The public-use mortality data is provided by NCHS in a fixed-width text file format (.dat). In this format, each variable occupies a specific character position on each line. We need to read the file for each NHANES cycle and extract the necessary columns.</p>
<div class="cell" data-layout-align="center" data-hash="03b-mortality-merge_cache/html/image_7d12b6dc1573c34ec3d30500279a3000">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="images/mortalityWeb.png" style="width:70.0%;height:40.0%" class="figure-img"></p>
</figure>
</div>
</div>
</div>
<p>To read this type of file, we use the <code><a href="https://readr.tidyverse.org/reference/read_fwf.html">readr::read_fwf()</a></code> function. We must provide <code>fwf_cols()</code> with the exact start and end positions for each variable we want to extract, based on the official NCHS documentation.</p>
<p>The following code demonstrates this process for the 1999-2000 mortality file, reading it directly from the CDC’s server by copying the link (shown in image). For this tutorial, this same process was repeated for all 10 survey cycles.</p>
<section id="mortality-data-1999-2000" class="level3" data-number="5.2.1"><h3 data-number="5.2.1" class="anchored" data-anchor-id="mortality-data-1999-2000">
<span class="header-section-number">5.2.1</span> Mortality data 1999-2000</h3>
<div class="cell" data-hash="03b-mortality-merge_cache/html/mort2000_fb0a73274bfae24a794c82a5488d617a">
<details><summary>Show/Hide Code</summary><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>mort2000 <span class="ot">&lt;-</span> <span class="fu">read_fwf</span>(<span class="at">file =</span> <span class="st">"https://ftp.cdc.gov/pub/Health_Statistics/NCHS/datalinkage/linked_mortality/NHANES_1999_2000_MORT_2019_PUBLIC.dat"</span>,</span>
<span id="cb6-2"><a href="#cb6-2"></a>                     <span class="at">col_types =</span> <span class="st">"iiiiiiii"</span>,</span>
<span id="cb6-3"><a href="#cb6-3"></a>                     <span class="fu">fwf_cols</span>(<span class="at">id =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">6</span>),</span>
<span id="cb6-4"><a href="#cb6-4"></a>                              <span class="at">mort_eligstat =</span> <span class="fu">c</span>(<span class="dv">15</span>,<span class="dv">15</span>),</span>
<span id="cb6-5"><a href="#cb6-5"></a>                              <span class="at">mort_stat =</span> <span class="fu">c</span>(<span class="dv">16</span>,<span class="dv">16</span>),</span>
<span id="cb6-6"><a href="#cb6-6"></a>                              <span class="at">mort_ucod_leading =</span> <span class="fu">c</span>(<span class="dv">17</span>,<span class="dv">19</span>),</span>
<span id="cb6-7"><a href="#cb6-7"></a>                              <span class="at">mort_diabetes =</span> <span class="fu">c</span>(<span class="dv">20</span>,<span class="dv">20</span>),</span>
<span id="cb6-8"><a href="#cb6-8"></a>                              <span class="at">mort_hyperten =</span> <span class="fu">c</span>(<span class="dv">21</span>,<span class="dv">21</span>),</span>
<span id="cb6-9"><a href="#cb6-9"></a>                              <span class="at">mort_permth_int =</span> <span class="fu">c</span>(<span class="dv">43</span>,<span class="dv">45</span>),</span>
<span id="cb6-10"><a href="#cb6-10"></a>                              <span class="at">mort_permth_exm =</span> <span class="fu">c</span>(<span class="dv">46</span>,<span class="dv">48</span>)),</span>
<span id="cb6-11"><a href="#cb6-11"></a>                     <span class="at">na =</span> <span class="fu">c</span>(<span class="st">""</span>, <span class="st">"."</span>))</span>
<span id="cb6-12"><a href="#cb6-12"></a></span>
<span id="cb6-13"><a href="#cb6-13"></a><span class="fu">colnames</span>(mort2000)</span>
<span id="cb6-14"><a href="#cb6-14"></a><span class="co">#&gt; [1] "id"                "mort_eligstat"     "mort_stat"        </span></span>
<span id="cb6-15"><a href="#cb6-15"></a><span class="co">#&gt; [4] "mort_ucod_leading" "mort_diabetes"     "mort_hyperten"    </span></span>
<span id="cb6-16"><a href="#cb6-16"></a><span class="co">#&gt; [7] "mort_permth_int"   "mort_permth_exm"</span></span>
<span id="cb6-17"><a href="#cb6-17"></a><span class="fu">head</span>(mort2000)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">

<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["id"],"name":[1],"type":["int"],"align":["right"]},{"label":["mort_eligstat"],"name":[2],"type":["int"],"align":["right"]},{"label":["mort_stat"],"name":[3],"type":["int"],"align":["right"]},{"label":["mort_ucod_leading"],"name":[4],"type":["int"],"align":["right"]},{"label":["mort_diabetes"],"name":[5],"type":["int"],"align":["right"]},{"label":["mort_hyperten"],"name":[6],"type":["int"],"align":["right"]},{"label":["mort_permth_int"],"name":[7],"type":["int"],"align":["right"]},{"label":["mort_permth_exm"],"name":[8],"type":["int"],"align":["right"]}],"data":[{"1":"1","2":"2","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA"},{"1":"2","2":"1","3":"1","4":"6","5":"0","6":"0","7":"177","8":"177"},{"1":"3","2":"2","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA"},{"1":"4","2":"2","3":"NA","4":"NA","5":"NA","6":"NA","7":"NA","8":"NA"},{"1":"5","2":"1","3":"0","4":"NA","5":"NA","6":"NA","7":"244","8":"244"},{"1":"6","2":"1","3":"0","4":"NA","5":"NA","6":"NA","7":"246","8":"245"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</section><section id="mortality-data-2001-2002" class="level3" data-number="5.2.2"><h3 data-number="5.2.2" class="anchored" data-anchor-id="mortality-data-2001-2002">
<span class="header-section-number">5.2.2</span> Mortality data 2001-2002</h3>
<div class="cell" data-hash="03b-mortality-merge_cache/html/mort2001_41867f94efe20a749db1c044d3dc5319">
<details><summary>Show/Hide Code</summary><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>mort2001 <span class="ot">&lt;-</span> <span class="fu">read_fwf</span>(<span class="at">file =</span> <span class="st">"https://ftp.cdc.gov/pub/Health_Statistics/NCHS/datalinkage/linked_mortality/NHANES_2001_2002_MORT_2019_PUBLIC.dat"</span>,</span>
<span id="cb7-2"><a href="#cb7-2"></a>                     <span class="at">col_types =</span> <span class="st">"iiiiiiii"</span>,</span>
<span id="cb7-3"><a href="#cb7-3"></a>                     <span class="fu">fwf_cols</span>(<span class="at">id =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">6</span>),</span>
<span id="cb7-4"><a href="#cb7-4"></a>                              <span class="at">mort_eligstat =</span> <span class="fu">c</span>(<span class="dv">15</span>,<span class="dv">15</span>),</span>
<span id="cb7-5"><a href="#cb7-5"></a>                              <span class="at">mort_stat =</span> <span class="fu">c</span>(<span class="dv">16</span>,<span class="dv">16</span>),</span>
<span id="cb7-6"><a href="#cb7-6"></a>                              <span class="at">mort_ucod_leading =</span> <span class="fu">c</span>(<span class="dv">17</span>,<span class="dv">19</span>),</span>
<span id="cb7-7"><a href="#cb7-7"></a>                              <span class="at">mort_diabetes =</span> <span class="fu">c</span>(<span class="dv">20</span>,<span class="dv">20</span>),</span>
<span id="cb7-8"><a href="#cb7-8"></a>                              <span class="at">mort_hyperten =</span> <span class="fu">c</span>(<span class="dv">21</span>,<span class="dv">21</span>),</span>
<span id="cb7-9"><a href="#cb7-9"></a>                              <span class="at">mort_permth_int =</span> <span class="fu">c</span>(<span class="dv">43</span>,<span class="dv">45</span>),</span>
<span id="cb7-10"><a href="#cb7-10"></a>                              <span class="at">mort_permth_exm =</span> <span class="fu">c</span>(<span class="dv">46</span>,<span class="dv">48</span>)),</span>
<span id="cb7-11"><a href="#cb7-11"></a>                     <span class="at">na =</span> <span class="fu">c</span>(<span class="st">""</span>, <span class="st">"."</span>))</span>
<span id="cb7-12"><a href="#cb7-12"></a><span class="co">#colnames(mort2001)</span></span>
<span id="cb7-13"><a href="#cb7-13"></a><span class="co">#head(mort2001)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="mortality-data-2003-2004" class="level3" data-number="5.2.3"><h3 data-number="5.2.3" class="anchored" data-anchor-id="mortality-data-2003-2004">
<span class="header-section-number">5.2.3</span> Mortality data 2003-2004</h3>
<div class="cell" data-hash="03b-mortality-merge_cache/html/mort2003_72a2e354d416e9974d16bd6f2748e615">
<details><summary>Show/Hide Code</summary><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>mort2003 <span class="ot">&lt;-</span> <span class="fu">read_fwf</span>(<span class="at">file =</span> <span class="st">"https://ftp.cdc.gov/pub/Health_Statistics/NCHS/datalinkage/linked_mortality/NHANES_2003_2004_MORT_2019_PUBLIC.dat"</span>,</span>
<span id="cb8-2"><a href="#cb8-2"></a>                     <span class="at">col_types =</span> <span class="st">"iiiiiiii"</span>,</span>
<span id="cb8-3"><a href="#cb8-3"></a>                     <span class="fu">fwf_cols</span>(<span class="at">id =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">6</span>),</span>
<span id="cb8-4"><a href="#cb8-4"></a>                              <span class="at">mort_eligstat =</span> <span class="fu">c</span>(<span class="dv">15</span>,<span class="dv">15</span>),</span>
<span id="cb8-5"><a href="#cb8-5"></a>                              <span class="at">mort_stat =</span> <span class="fu">c</span>(<span class="dv">16</span>,<span class="dv">16</span>),</span>
<span id="cb8-6"><a href="#cb8-6"></a>                              <span class="at">mort_ucod_leading =</span> <span class="fu">c</span>(<span class="dv">17</span>,<span class="dv">19</span>),</span>
<span id="cb8-7"><a href="#cb8-7"></a>                              <span class="at">mort_diabetes =</span> <span class="fu">c</span>(<span class="dv">20</span>,<span class="dv">20</span>),</span>
<span id="cb8-8"><a href="#cb8-8"></a>                              <span class="at">mort_hyperten =</span> <span class="fu">c</span>(<span class="dv">21</span>,<span class="dv">21</span>),</span>
<span id="cb8-9"><a href="#cb8-9"></a>                              <span class="at">mort_permth_int =</span> <span class="fu">c</span>(<span class="dv">43</span>,<span class="dv">45</span>),</span>
<span id="cb8-10"><a href="#cb8-10"></a>                              <span class="at">mort_permth_exm =</span> <span class="fu">c</span>(<span class="dv">46</span>,<span class="dv">48</span>)),</span>
<span id="cb8-11"><a href="#cb8-11"></a>                     <span class="at">na =</span> <span class="fu">c</span>(<span class="st">""</span>, <span class="st">"."</span>))</span>
<span id="cb8-12"><a href="#cb8-12"></a></span>
<span id="cb8-13"><a href="#cb8-13"></a><span class="co">#colnames(mort2003)</span></span>
<span id="cb8-14"><a href="#cb8-14"></a><span class="co">#head(mort2003)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="mortality-data-2005-2006" class="level3" data-number="5.2.4"><h3 data-number="5.2.4" class="anchored" data-anchor-id="mortality-data-2005-2006">
<span class="header-section-number">5.2.4</span> Mortality data 2005-2006</h3>
<div class="cell" data-hash="03b-mortality-merge_cache/html/mort2005_4d57c2f36a4342698b416f0df0ef6f36">
<details><summary>Show/Hide Code</summary><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>mort2005 <span class="ot">&lt;-</span> <span class="fu">read_fwf</span>(<span class="at">file =</span> <span class="st">"https://ftp.cdc.gov/pub/Health_Statistics/NCHS/datalinkage/linked_mortality/NHANES_2005_2006_MORT_2019_PUBLIC.dat"</span>,</span>
<span id="cb9-2"><a href="#cb9-2"></a>                     <span class="at">col_types =</span> <span class="st">"iiiiiiii"</span>,</span>
<span id="cb9-3"><a href="#cb9-3"></a>                     <span class="fu">fwf_cols</span>(<span class="at">id =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">6</span>),</span>
<span id="cb9-4"><a href="#cb9-4"></a>                              <span class="at">mort_eligstat =</span> <span class="fu">c</span>(<span class="dv">15</span>,<span class="dv">15</span>),</span>
<span id="cb9-5"><a href="#cb9-5"></a>                              <span class="at">mort_stat =</span> <span class="fu">c</span>(<span class="dv">16</span>,<span class="dv">16</span>),</span>
<span id="cb9-6"><a href="#cb9-6"></a>                              <span class="at">mort_ucod_leading =</span> <span class="fu">c</span>(<span class="dv">17</span>,<span class="dv">19</span>),</span>
<span id="cb9-7"><a href="#cb9-7"></a>                              <span class="at">mort_diabetes =</span> <span class="fu">c</span>(<span class="dv">20</span>,<span class="dv">20</span>),</span>
<span id="cb9-8"><a href="#cb9-8"></a>                              <span class="at">mort_hyperten =</span> <span class="fu">c</span>(<span class="dv">21</span>,<span class="dv">21</span>),</span>
<span id="cb9-9"><a href="#cb9-9"></a>                              <span class="at">mort_permth_int =</span> <span class="fu">c</span>(<span class="dv">43</span>,<span class="dv">45</span>),</span>
<span id="cb9-10"><a href="#cb9-10"></a>                              <span class="at">mort_permth_exm =</span> <span class="fu">c</span>(<span class="dv">46</span>,<span class="dv">48</span>)),</span>
<span id="cb9-11"><a href="#cb9-11"></a>                     <span class="at">na =</span> <span class="fu">c</span>(<span class="st">""</span>, <span class="st">"."</span>))</span>
<span id="cb9-12"><a href="#cb9-12"></a></span>
<span id="cb9-13"><a href="#cb9-13"></a><span class="co">#colnames(mort2005)</span></span>
<span id="cb9-14"><a href="#cb9-14"></a><span class="co">#head(mort2005)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="mortality-data-2007-2008" class="level3" data-number="5.2.5"><h3 data-number="5.2.5" class="anchored" data-anchor-id="mortality-data-2007-2008">
<span class="header-section-number">5.2.5</span> Mortality data 2007-2008</h3>
<div class="cell" data-hash="03b-mortality-merge_cache/html/mort2007_b73ce742bd3bbabcaf75dd5c42c13558">
<details><summary>Show/Hide Code</summary><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>mort2007 <span class="ot">&lt;-</span> <span class="fu">read_fwf</span>(<span class="at">file =</span> <span class="st">"https://ftp.cdc.gov/pub/Health_Statistics/NCHS/datalinkage/linked_mortality/NHANES_2007_2008_MORT_2019_PUBLIC.dat"</span>,</span>
<span id="cb10-2"><a href="#cb10-2"></a>                     <span class="at">col_types =</span> <span class="st">"iiiiiiii"</span>,</span>
<span id="cb10-3"><a href="#cb10-3"></a>                     <span class="fu">fwf_cols</span>(<span class="at">id =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">6</span>),</span>
<span id="cb10-4"><a href="#cb10-4"></a>                              <span class="at">mort_eligstat =</span> <span class="fu">c</span>(<span class="dv">15</span>,<span class="dv">15</span>),</span>
<span id="cb10-5"><a href="#cb10-5"></a>                              <span class="at">mort_stat =</span> <span class="fu">c</span>(<span class="dv">16</span>,<span class="dv">16</span>),</span>
<span id="cb10-6"><a href="#cb10-6"></a>                              <span class="at">mort_ucod_leading =</span> <span class="fu">c</span>(<span class="dv">17</span>,<span class="dv">19</span>),</span>
<span id="cb10-7"><a href="#cb10-7"></a>                              <span class="at">mort_diabetes =</span> <span class="fu">c</span>(<span class="dv">20</span>,<span class="dv">20</span>),</span>
<span id="cb10-8"><a href="#cb10-8"></a>                              <span class="at">mort_hyperten =</span> <span class="fu">c</span>(<span class="dv">21</span>,<span class="dv">21</span>),</span>
<span id="cb10-9"><a href="#cb10-9"></a>                              <span class="at">mort_permth_int =</span> <span class="fu">c</span>(<span class="dv">43</span>,<span class="dv">45</span>),</span>
<span id="cb10-10"><a href="#cb10-10"></a>                              <span class="at">mort_permth_exm =</span> <span class="fu">c</span>(<span class="dv">46</span>,<span class="dv">48</span>)),</span>
<span id="cb10-11"><a href="#cb10-11"></a>                     <span class="at">na =</span> <span class="fu">c</span>(<span class="st">""</span>, <span class="st">"."</span>))</span>
<span id="cb10-12"><a href="#cb10-12"></a></span>
<span id="cb10-13"><a href="#cb10-13"></a><span class="co">#colnames(mort2007)</span></span>
<span id="cb10-14"><a href="#cb10-14"></a><span class="co">#head(mort2007)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="mortality-data-2009-2010" class="level3" data-number="5.2.6"><h3 data-number="5.2.6" class="anchored" data-anchor-id="mortality-data-2009-2010">
<span class="header-section-number">5.2.6</span> Mortality data 2009-2010</h3>
<div class="cell" data-hash="03b-mortality-merge_cache/html/mort2009_d768aa1b0826937c5e84be3198a9135a">
<details><summary>Show/Hide Code</summary><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>mort2009 <span class="ot">&lt;-</span> <span class="fu">read_fwf</span>(<span class="at">file =</span> <span class="st">"https://ftp.cdc.gov/pub/Health_Statistics/NCHS/datalinkage/linked_mortality/NHANES_2009_2010_MORT_2019_PUBLIC.dat"</span>,</span>
<span id="cb11-2"><a href="#cb11-2"></a>                     <span class="at">col_types =</span> <span class="st">"iiiiiiii"</span>,</span>
<span id="cb11-3"><a href="#cb11-3"></a>                     <span class="fu">fwf_cols</span>(<span class="at">id =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">6</span>),</span>
<span id="cb11-4"><a href="#cb11-4"></a>                              <span class="at">mort_eligstat =</span> <span class="fu">c</span>(<span class="dv">15</span>,<span class="dv">15</span>),</span>
<span id="cb11-5"><a href="#cb11-5"></a>                              <span class="at">mort_stat =</span> <span class="fu">c</span>(<span class="dv">16</span>,<span class="dv">16</span>),</span>
<span id="cb11-6"><a href="#cb11-6"></a>                              <span class="at">mort_ucod_leading =</span> <span class="fu">c</span>(<span class="dv">17</span>,<span class="dv">19</span>),</span>
<span id="cb11-7"><a href="#cb11-7"></a>                              <span class="at">mort_diabetes =</span> <span class="fu">c</span>(<span class="dv">20</span>,<span class="dv">20</span>),</span>
<span id="cb11-8"><a href="#cb11-8"></a>                              <span class="at">mort_hyperten =</span> <span class="fu">c</span>(<span class="dv">21</span>,<span class="dv">21</span>),</span>
<span id="cb11-9"><a href="#cb11-9"></a>                              <span class="at">mort_permth_int =</span> <span class="fu">c</span>(<span class="dv">43</span>,<span class="dv">45</span>),</span>
<span id="cb11-10"><a href="#cb11-10"></a>                              <span class="at">mort_permth_exm =</span> <span class="fu">c</span>(<span class="dv">46</span>,<span class="dv">48</span>)),</span>
<span id="cb11-11"><a href="#cb11-11"></a>                     <span class="at">na =</span> <span class="fu">c</span>(<span class="st">""</span>, <span class="st">"."</span>))</span>
<span id="cb11-12"><a href="#cb11-12"></a></span>
<span id="cb11-13"><a href="#cb11-13"></a><span class="co">#colnames(mort2009)</span></span>
<span id="cb11-14"><a href="#cb11-14"></a><span class="co">#head(mort2009)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="mortality-data-2011-2012" class="level3" data-number="5.2.7"><h3 data-number="5.2.7" class="anchored" data-anchor-id="mortality-data-2011-2012">
<span class="header-section-number">5.2.7</span> Mortality data 2011-2012</h3>
<div class="cell" data-hash="03b-mortality-merge_cache/html/mort2011_3a04d495ba55014746dbcc82e7e0de81">
<details><summary>Show/Hide Code</summary><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>mort2011 <span class="ot">&lt;-</span> <span class="fu">read_fwf</span>(<span class="at">file =</span> <span class="st">"https://ftp.cdc.gov/pub/Health_Statistics/NCHS/datalinkage/linked_mortality/NHANES_2011_2012_MORT_2019_PUBLIC.dat"</span>,</span>
<span id="cb12-2"><a href="#cb12-2"></a>                     <span class="at">col_types =</span> <span class="st">"iiiiiiii"</span>,</span>
<span id="cb12-3"><a href="#cb12-3"></a>                     <span class="fu">fwf_cols</span>(<span class="at">id =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">6</span>),</span>
<span id="cb12-4"><a href="#cb12-4"></a>                              <span class="at">mort_eligstat =</span> <span class="fu">c</span>(<span class="dv">15</span>,<span class="dv">15</span>),</span>
<span id="cb12-5"><a href="#cb12-5"></a>                              <span class="at">mort_stat =</span> <span class="fu">c</span>(<span class="dv">16</span>,<span class="dv">16</span>),</span>
<span id="cb12-6"><a href="#cb12-6"></a>                              <span class="at">mort_ucod_leading =</span> <span class="fu">c</span>(<span class="dv">17</span>,<span class="dv">19</span>),</span>
<span id="cb12-7"><a href="#cb12-7"></a>                              <span class="at">mort_diabetes =</span> <span class="fu">c</span>(<span class="dv">20</span>,<span class="dv">20</span>),</span>
<span id="cb12-8"><a href="#cb12-8"></a>                              <span class="at">mort_hyperten =</span> <span class="fu">c</span>(<span class="dv">21</span>,<span class="dv">21</span>),</span>
<span id="cb12-9"><a href="#cb12-9"></a>                              <span class="at">mort_permth_int =</span> <span class="fu">c</span>(<span class="dv">43</span>,<span class="dv">45</span>),</span>
<span id="cb12-10"><a href="#cb12-10"></a>                              <span class="at">mort_permth_exm =</span> <span class="fu">c</span>(<span class="dv">46</span>,<span class="dv">48</span>)),</span>
<span id="cb12-11"><a href="#cb12-11"></a>                     <span class="at">na =</span> <span class="fu">c</span>(<span class="st">""</span>, <span class="st">"."</span>))</span>
<span id="cb12-12"><a href="#cb12-12"></a></span>
<span id="cb12-13"><a href="#cb12-13"></a><span class="co">#colnames(mort2011)</span></span>
<span id="cb12-14"><a href="#cb12-14"></a><span class="co">#head(mort2011)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="mortality-data-2013-2014" class="level3" data-number="5.2.8"><h3 data-number="5.2.8" class="anchored" data-anchor-id="mortality-data-2013-2014">
<span class="header-section-number">5.2.8</span> Mortality data 2013-2014</h3>
<div class="cell" data-hash="03b-mortality-merge_cache/html/mort2013_9cb8bc1fe21076ac67213483f36bcda1">
<details><summary>Show/Hide Code</summary><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>mort2013 <span class="ot">&lt;-</span> <span class="fu">read_fwf</span>(<span class="at">file =</span> <span class="st">"https://ftp.cdc.gov/pub/Health_Statistics/NCHS/datalinkage/linked_mortality/NHANES_2013_2014_MORT_2019_PUBLIC.dat"</span>,</span>
<span id="cb13-2"><a href="#cb13-2"></a>                     <span class="at">col_types =</span> <span class="st">"iiiiiiii"</span>,</span>
<span id="cb13-3"><a href="#cb13-3"></a>                     <span class="fu">fwf_cols</span>(<span class="at">id =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">6</span>),</span>
<span id="cb13-4"><a href="#cb13-4"></a>                              <span class="at">mort_eligstat =</span> <span class="fu">c</span>(<span class="dv">15</span>,<span class="dv">15</span>),</span>
<span id="cb13-5"><a href="#cb13-5"></a>                              <span class="at">mort_stat =</span> <span class="fu">c</span>(<span class="dv">16</span>,<span class="dv">16</span>),</span>
<span id="cb13-6"><a href="#cb13-6"></a>                              <span class="at">mort_ucod_leading =</span> <span class="fu">c</span>(<span class="dv">17</span>,<span class="dv">19</span>),</span>
<span id="cb13-7"><a href="#cb13-7"></a>                              <span class="at">mort_diabetes =</span> <span class="fu">c</span>(<span class="dv">20</span>,<span class="dv">20</span>),</span>
<span id="cb13-8"><a href="#cb13-8"></a>                              <span class="at">mort_hyperten =</span> <span class="fu">c</span>(<span class="dv">21</span>,<span class="dv">21</span>),</span>
<span id="cb13-9"><a href="#cb13-9"></a>                              <span class="at">mort_permth_int =</span> <span class="fu">c</span>(<span class="dv">43</span>,<span class="dv">45</span>),</span>
<span id="cb13-10"><a href="#cb13-10"></a>                              <span class="at">mort_permth_exm =</span> <span class="fu">c</span>(<span class="dv">46</span>,<span class="dv">48</span>)),</span>
<span id="cb13-11"><a href="#cb13-11"></a>                     <span class="at">na =</span> <span class="fu">c</span>(<span class="st">""</span>, <span class="st">"."</span>))</span>
<span id="cb13-12"><a href="#cb13-12"></a></span>
<span id="cb13-13"><a href="#cb13-13"></a><span class="co">#colnames(mort2013)</span></span>
<span id="cb13-14"><a href="#cb13-14"></a><span class="co">#head(mort2013)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="mortality-data-2015-2016" class="level3" data-number="5.2.9"><h3 data-number="5.2.9" class="anchored" data-anchor-id="mortality-data-2015-2016">
<span class="header-section-number">5.2.9</span> Mortality data 2015-2016</h3>
<div class="cell" data-hash="03b-mortality-merge_cache/html/mort2015_d582820d5f464dd6fb6acbbb95b1122c">
<details><summary>Show/Hide Code</summary><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>mort2015 <span class="ot">&lt;-</span> <span class="fu">read_fwf</span>(<span class="at">file =</span> <span class="st">"https://ftp.cdc.gov/pub/Health_Statistics/NCHS/datalinkage/linked_mortality/NHANES_2015_2016_MORT_2019_PUBLIC.dat"</span>,</span>
<span id="cb14-2"><a href="#cb14-2"></a>                     <span class="at">col_types =</span> <span class="st">"iiiiiiii"</span>,</span>
<span id="cb14-3"><a href="#cb14-3"></a>                     <span class="fu">fwf_cols</span>(<span class="at">id =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">6</span>),</span>
<span id="cb14-4"><a href="#cb14-4"></a>                              <span class="at">mort_eligstat =</span> <span class="fu">c</span>(<span class="dv">15</span>,<span class="dv">15</span>),</span>
<span id="cb14-5"><a href="#cb14-5"></a>                              <span class="at">mort_stat =</span> <span class="fu">c</span>(<span class="dv">16</span>,<span class="dv">16</span>),</span>
<span id="cb14-6"><a href="#cb14-6"></a>                              <span class="at">mort_ucod_leading =</span> <span class="fu">c</span>(<span class="dv">17</span>,<span class="dv">19</span>),</span>
<span id="cb14-7"><a href="#cb14-7"></a>                              <span class="at">mort_diabetes =</span> <span class="fu">c</span>(<span class="dv">20</span>,<span class="dv">20</span>),</span>
<span id="cb14-8"><a href="#cb14-8"></a>                              <span class="at">mort_hyperten =</span> <span class="fu">c</span>(<span class="dv">21</span>,<span class="dv">21</span>),</span>
<span id="cb14-9"><a href="#cb14-9"></a>                              <span class="at">mort_permth_int =</span> <span class="fu">c</span>(<span class="dv">43</span>,<span class="dv">45</span>),</span>
<span id="cb14-10"><a href="#cb14-10"></a>                              <span class="at">mort_permth_exm =</span> <span class="fu">c</span>(<span class="dv">46</span>,<span class="dv">48</span>)),</span>
<span id="cb14-11"><a href="#cb14-11"></a>                     <span class="at">na =</span> <span class="fu">c</span>(<span class="st">""</span>, <span class="st">"."</span>))</span>
<span id="cb14-12"><a href="#cb14-12"></a></span>
<span id="cb14-13"><a href="#cb14-13"></a><span class="co">#colnames(mort2015)</span></span>
<span id="cb14-14"><a href="#cb14-14"></a><span class="co">#head(mort2015)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="mortality-data-2017-2018" class="level3" data-number="5.2.10"><h3 data-number="5.2.10" class="anchored" data-anchor-id="mortality-data-2017-2018">
<span class="header-section-number">5.2.10</span> Mortality data 2017-2018</h3>
<div class="cell" data-hash="03b-mortality-merge_cache/html/mort2017_3dcd332685914b2f30bf4768d5239702">
<details><summary>Show/Hide Code</summary><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>mort2017 <span class="ot">&lt;-</span> <span class="fu">read_fwf</span>(<span class="at">file =</span> <span class="st">"https://ftp.cdc.gov/pub/Health_Statistics/NCHS/datalinkage/linked_mortality/NHANES_2017_2018_MORT_2019_PUBLIC.dat"</span>,</span>
<span id="cb15-2"><a href="#cb15-2"></a>                     <span class="at">col_types =</span> <span class="st">"iiiiiiii"</span>,</span>
<span id="cb15-3"><a href="#cb15-3"></a>                     <span class="fu">fwf_cols</span>(<span class="at">id =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">6</span>),</span>
<span id="cb15-4"><a href="#cb15-4"></a>                              <span class="at">mort_eligstat =</span> <span class="fu">c</span>(<span class="dv">15</span>,<span class="dv">15</span>),</span>
<span id="cb15-5"><a href="#cb15-5"></a>                              <span class="at">mort_stat =</span> <span class="fu">c</span>(<span class="dv">16</span>,<span class="dv">16</span>),</span>
<span id="cb15-6"><a href="#cb15-6"></a>                              <span class="at">mort_ucod_leading =</span> <span class="fu">c</span>(<span class="dv">17</span>,<span class="dv">19</span>),</span>
<span id="cb15-7"><a href="#cb15-7"></a>                              <span class="at">mort_diabetes =</span> <span class="fu">c</span>(<span class="dv">20</span>,<span class="dv">20</span>),</span>
<span id="cb15-8"><a href="#cb15-8"></a>                              <span class="at">mort_hyperten =</span> <span class="fu">c</span>(<span class="dv">21</span>,<span class="dv">21</span>),</span>
<span id="cb15-9"><a href="#cb15-9"></a>                              <span class="at">mort_permth_int =</span> <span class="fu">c</span>(<span class="dv">43</span>,<span class="dv">45</span>),</span>
<span id="cb15-10"><a href="#cb15-10"></a>                              <span class="at">mort_permth_exm =</span> <span class="fu">c</span>(<span class="dv">46</span>,<span class="dv">48</span>)),</span>
<span id="cb15-11"><a href="#cb15-11"></a>                     <span class="at">na =</span> <span class="fu">c</span>(<span class="st">""</span>, <span class="st">"."</span>))</span>
<span id="cb15-12"><a href="#cb15-12"></a></span>
<span id="cb15-13"><a href="#cb15-13"></a><span class="co">#colnames(mort2017)</span></span>
<span id="cb15-14"><a href="#cb15-14"></a><span class="co">#head(mort2017)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>After downloading, each of the 10 mortality data frames is saved as an <code>.RData</code> file.</p>
<div class="cell" data-hash="03b-mortality-merge_cache/html/saveMort_3a617b017baaacf090a28fd60415d2ab">
<details><summary>Show/Hide Code</summary><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="fu">saveRDS</span>(mort2000, <span class="at">file =</span> <span class="st">"data/Mortalitydata/mort2000.RData"</span>)</span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="fu">saveRDS</span>(mort2001, <span class="at">file =</span> <span class="st">"data/Mortalitydata/mort2001.RData"</span>)</span>
<span id="cb16-3"><a href="#cb16-3"></a><span class="fu">saveRDS</span>(mort2003, <span class="at">file =</span> <span class="st">"data/Mortalitydata/mort2003.RData"</span>)</span>
<span id="cb16-4"><a href="#cb16-4"></a><span class="fu">saveRDS</span>(mort2005, <span class="at">file =</span> <span class="st">"data/Mortalitydata/mort2005.RData"</span>)</span>
<span id="cb16-5"><a href="#cb16-5"></a><span class="fu">saveRDS</span>(mort2007, <span class="at">file =</span> <span class="st">"data/Mortalitydata/mort2007.RData"</span>)</span>
<span id="cb16-6"><a href="#cb16-6"></a><span class="fu">saveRDS</span>(mort2009, <span class="at">file =</span> <span class="st">"data/Mortalitydata/mort2009.RData"</span>)</span>
<span id="cb16-7"><a href="#cb16-7"></a><span class="fu">saveRDS</span>(mort2011, <span class="at">file =</span> <span class="st">"data/Mortalitydata/mort2011.RData"</span>)</span>
<span id="cb16-8"><a href="#cb16-8"></a><span class="fu">saveRDS</span>(mort2013, <span class="at">file =</span> <span class="st">"data/Mortalitydata/mort2013.RData"</span>)</span>
<span id="cb16-9"><a href="#cb16-9"></a><span class="fu">saveRDS</span>(mort2015, <span class="at">file =</span> <span class="st">"data/Mortalitydata/mort2015.RData"</span>)</span>
<span id="cb16-10"><a href="#cb16-10"></a><span class="fu">saveRDS</span>(mort2017, <span class="at">file =</span> <span class="st">"data/Mortalitydata/mort2017.RData"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr></section></section><section id="merging-nhanes-with-mortality-data" class="level2" data-number="5.3"><h2 data-number="5.3" class="anchored" data-anchor-id="merging-nhanes-with-mortality-data">
<span class="header-section-number">5.3</span> Merging NHANES with Mortality Data</h2>
<ul>
<li>R Code Chunk 4: Combine Mortality Datasets</li>
</ul>
<p>The following code combines the 10 individual mortality data frames into a single, large data frame named <code>dat.mortality</code>. The <code><a href="https://rdrr.io/r/base/cbind.html">rbind()</a></code> function is used to combine the data frames vertically by stacking rows. The <code><a href="https://rdrr.io/r/base/dim.html">dim()</a></code> and <code><a href="https://rdrr.io/r/utils/head.html">head()</a></code> functions are then used to confirm the dimensions and inspect the first few rows of the combined dataset. There are 101,316 rows in the dataset.</p>
<div class="cell" data-hash="03b-mortality-merge_cache/html/mortMerge_d923f1aa1f53f505e8290cc83e15d183">
<details><summary>Show/Hide Code</summary><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>dat.mortality <span class="ot">&lt;-</span> <span class="fu">rbind</span>(mort2000, mort2001, mort2003, mort2005, </span>
<span id="cb17-2"><a href="#cb17-2"></a>                       mort2007, mort2009, mort2011, </span>
<span id="cb17-3"><a href="#cb17-3"></a>                       mort2013, mort2015, mort2017)</span>
<span id="cb17-4"><a href="#cb17-4"></a><span class="fu">dim</span>(dat.mortality)</span>
<span id="cb17-5"><a href="#cb17-5"></a><span class="co">#&gt; [1] 101316      8</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Examine Mortality Eligibility Status:</strong></p>
<p>After combining the datasets, it’s important to examine the <code>mort_eligstat</code> variable. This variable indicates the eligibility status of each participant for the mortality follow-up study. The codes are defined as follows:</p>
<p><code>1</code>: Eligible for mortality follow-up.</p>
<p><code>2</code>: Under age 18 and not available for public release.</p>
<p><code>3</code>: Ineligible for other reasons.</p>
<p><code>NA</code>: Missing eligibility status.</p>
<p>The <code><a href="https://rdrr.io/r/base/table.html">table()</a></code> function is used to see the distribution of participants across these categories.</p>
<div class="cell" data-hash="03b-mortality-merge_cache/html/ELIGSTAT_0f35e6070831344e4a2dacc3a6f6d0a9">
<details><summary>Show/Hide Code</summary><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="fu">table</span>(dat.mortality<span class="sc">$</span>mort_eligstat, <span class="at">useNA =</span> <span class="st">"always"</span>)</span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="co">#&gt; </span></span>
<span id="cb18-3"><a href="#cb18-3"></a><span class="co">#&gt;     1     2     3  &lt;NA&gt; </span></span>
<span id="cb18-4"><a href="#cb18-4"></a><span class="co">#&gt; 59064 42112   140     0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
<ul>
<li>R Code Chunk 5: Final Merge of NHANES and Mortality Data</li>
</ul>
<p>The following code performs the final merge, joining the combined NHANES dataset (<code>dat.full</code>) with the combined mortality dataset (<code>dat.mortality</code>). The two datasets are linked using the unique participant identifier, <code>id</code>. By setting the argument <code>all.x = TRUE</code>, all participants from the combined NHANES dataset are kept, regardless of whether they have a matching record in the combined mortality dataset.</p>
<div class="cell" data-hash="03b-mortality-merge_cache/html/finalMerge_b2c250790d9ff5c5c29eaf14d1936f9c">
<details><summary>Show/Hide Code</summary><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>dat.full.with.mortality <span class="ot">&lt;-</span> <span class="fu">merge</span>(dat.full, dat.mortality, </span>
<span id="cb19-2"><a href="#cb19-2"></a>                                 <span class="at">by =</span> <span class="st">"id"</span>, <span class="at">all.x =</span> <span class="cn">TRUE</span>)</span>
<span id="cb19-3"><a href="#cb19-3"></a></span>
<span id="cb19-4"><a href="#cb19-4"></a><span class="fu">dim</span>(dat.full.with.mortality)</span>
<span id="cb19-5"><a href="#cb19-5"></a><span class="co">#&gt; [1] 101316     19</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
<ul>
<li>R Code Chunk 6: Save Final Dataset</li>
</ul>
<p>Finally, the complete, merged dataset is saved as an RDS file. This file, <code>dat.full.with.mortality.RDS</code>, will be the starting point for the statistical analysis in the next chapter.</p>
<div class="cell" data-hash="03b-mortality-merge_cache/html/savefull_18d5554c1fa43cd7bdcf9d5de9e94cb3">
<details><summary>Show/Hide Code</summary><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="fu">saveRDS</span>(dat.full.with.mortality, </span>
<span id="cb20-2"><a href="#cb20-2"></a>        <span class="at">file =</span> <span class="st">"data/dat.full.with.mortality.RDS"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>This concludes the second part of the data preparation stage.</p>
<hr></section><section id="chapter-summary-and-next-steps" class="level2" data-number="5.4"><h2 data-number="5.4" class="anchored" data-anchor-id="chapter-summary-and-next-steps">
<span class="header-section-number">5.4</span> Chapter Summary and Next Steps</h2>
<p>This chapter concluded the data preparation phase. We first combined the 10 individual NHANES survey cycles into a single, comprehensive dataset and adjusted the survey weights for the pooled 20-year period.</p>
<p>Subsequently, we acquired the public-use mortality follow-up data and merged it with the NHANES data by participant ID. The final output of this chapter is a single, complete dataset that links baseline survey data to long-term mortality outcomes, forming the foundation for all statistical analyses in the chapters that follow.</p>


</section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./03a-download-merge.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Data Download and Merging</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./04-variable-cleaning.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Variable Definitions and Cleaning</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>